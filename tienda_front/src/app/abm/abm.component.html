
<div class="space"></div>

<div class="box">
    <div class="box-button">
        <a (click)="goTo('interface')" class="button"> Ir a pagina principal </a>
        <a (click)="group1()" class="button"> Añadir producto </a>
        <a (click)="group2()" class="button"> Mostrar productos </a>
    </div>
    
</div>

<div class="space"></div>

<ng-container *ngIf="bit==null then nothing"></ng-container>
<ng-container *ngIf="bit==false then block1"></ng-container>   <!-- me dirijo a la parte de añadir producto -->
<ng-container *ngIf="bit==true then block2"></ng-container>   <!-- me dirijo a la parte de llamar a los productos -->

<ng-template #nothing></ng-template>

<ng-template #block1>
    
    <div class="details">
        <h2> Seleccione la categoria del producto a añadir </h2>
    </div>

    <!-- Al seleccionar alguno de los dos, debemos deshabilitarlo, y si elegimos el otro, lo volvemos a activar, y asi-->
    <div style="text-align: center;">
        <button (click)="addDress()" [disabled]="addbit==false" style="margin-right: 10px;"> Indumentaria </button>
        <button (click)="addFragrance()" [disabled]="addbit==true"> Fragrancia </button>
    </div>

    <ng-container *ngIf="addbit==null then nothing2"></ng-container>
    <ng-container *ngIf="addbit==false then add_dress"></ng-container>
    <ng-container *ngIf="addbit==true then add_frag"></ng-container>

    <ng-template #nothing2></ng-template>

    <ng-template #add_dress>
        <!-- creo el form para dress-->
        <form [formGroup]="dform">  <!--method="GET">     get envia la info en la URL y post en el body del http (revisar cual usar) -->
            <fieldset>
                <legend> Agregue los datos en los campos y pulse Guardar </legend>
                
                <!-- LA SUBCATEGORIA NO SE ELIJE -->
                
                <!-- OJO DE AGREGAR LOS LABEL FALTANTES Y DE VER QUE TODOS LOS CAMPOS SEAN REQUERIDOS -->

                <p> <label for="sexo"> Sexo: </label>
                    <input type="radio" name="sexo" formControlName="sexo" value="hombre"> Masculino 
                    <input type="radio" name="sexo" formControlName="sexo" value="mujer"> Femenino 
                </p>
                <p> <label for="edad"> Edad: </label>
                    <select name="edad" required formControlName="edad">
                        <option value="niño"> Niños </option>
                        <option value="joven"> Jovenes </option>
                        <option value="adulto"> Adultos </option>
                        <option value="anciano"> Ancianos </option>
                    </select>
                </p>
                <p> <label for="brand"> Marca: </label>
                    <input type="text" name="marca" id="brand" maxlength="20" formControlName="marca"  required> </p>
                <p> <label for="model"> Modelo: </label>
                    <input type="text" name="modelo" id="model" maxlength="20" formControlName="modelo" required> </p>
                <p> <label for="code"> Codigo: </label> 
                    <input type="text" name="codigo" id="code" maxlength="7" formControlName="codigo" required> </p>
                <p> <label for="size"> Talle: </label> 
                    <input type="text" name="talle" id="size" maxlength="4" formControlName="talle"  required> </p>
                <p> <label for="color"> Color: </label> 
                    <input type="text" name="color" id="color" maxlength="20" formControlName="color"  required> </p>
                <p> <label for="stock"> Stock: </label> 
                    <input type="radio" name="stock" formControlName="stock" value="true"> Si 
                    <input type="radio" name="stock" formControlName="stock" value="false"> No </p>
                <p> <label for="price"> Precio: $</label> 
                    <input style="width: 100px;" type="number" name="precio" id="price" formControlName="precio" required> </p>
                <p> <label for="image"> Imagen: </label> 
                    <input type="file" name="imagen" id="image" (change)="encodeAsBase64($event)" required></p>
                <p> <input (click)="sendDress()" type="submit" value="Guardar" style="margin-right: 5px;"> <input type="reset" value="Limpiar"> </p>
            </fieldset>
        </form>
    </ng-template>

    <ng-template #add_frag>
        <!-- creo el form para fragrance -->
        <form [formGroup]="fform">
            <fieldset>
                <legend> Agregue los datos en los campos y pulse Guardar </legend>
                <p> <label for="volume"> Volumen: </label>
                    <input style="width: 60px;" type="number" name="volumen" id="volume" maxlength="4" formControlName="volumen" required>ml </p>
                <p> <label for="smell"> Aroma: </label>
                    <input type="text" name="aroma" id="smell" maxlength="30" placeholder="Breve descripcion" formControlName="aroma"  required> </p>
                <p> <label for="country"> Pais de origen: </label> 
                    <input type="text" name="pais" id="volume" maxlength="30" formControlName="pais" required> </p>
                <p> <label for="sexo"> Sexo: </label> 
                    <input type="radio" name="sexo" formControlName="sexo" value="hombre"> Masculino 
                    <input type="radio" name="sexo" formControlName="sexo" value="mujer"> Femenino </p>
                <p> <label for="brand"> Marca: </label> 
                    <input type="text" name="marca" id="brand" maxlength="20" formControlName="marca" required> </p>
                <p> <label for="model"> Modelo: </label> 
                    <input type="text" name="modelo" id="model" maxlength="20" formControlName="modelo" required> </p>
                <p> <label for="code"> Codigo: </label> 
                    <input type="text" name="codigo" id="code" maxlength="4" formControlName="codigo" required> </p>
                <p> <label for="stock"> Stock: </label> 
                    <input type="radio" name="stock" formControlName="stock" value="true"> Si 
                    <input type="radio" name="stock" formControlName="stock" value="false"> No </p>
                <p> <label for="price"> Precio: $</label> 
                    <input style="width: 100px;" type="number" name="precio" id="price" formControlName="precio" required> </p>
                <p> <label for="image"> Imagen: </label>
                    <input type="file" name="imagen" id="image" (change)="encodeAsBase64($event)" required></p>
                <p> <input (click)="sendFragrance()" type="submit" value="Guardar" style="margin-right: 5px;"> <input type="reset" value="Limpiar"> </p>
            </fieldset>
        </form>
    </ng-template>

</ng-template>


<ng-template #block2>

    <div class="details">
        <h2> Detalles de los productos </h2>
    </div>

    <div style="text-align: center;">
        <p> Seleccione la categoria para visualizar sus productos </p>
        <button (click)="callDress()" [disabled]="callbit==false" style="margin-right: 10px;"> Indumentaria </button>
        <button (click)="callFragrance()" [disabled]="callbit==true"> Fragrancia </button>
    </div>

    <ng-container *ngIf="callbit==null then nothing3"></ng-container>
    <ng-container *ngIf="callbit==false then call_dress"></ng-container>
    <ng-container *ngIf="callbit==true then call_frag"></ng-container>

    <ng-template #nothing3></ng-template>

    <ng-template #call_dress>
        <table class="center">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>SEXO</th>
                    <th>EDAD</th>
                    <th>MARCA</th>
                    <th>MODELO</th>
                    <th>CODIGO UNICO</th>
                    <th>TALLE</th>
                    <th>COLOR</th>
                    <th>STOCK</th>
                    <th>PRECIO</th>
                    <th>URL IMAGEN</th>
                    <th>Opciones de configuración</th>
                </tr>
            </thead>
    
            <tbody>
                <tr *ngFor="let item of dresses$ | async">
                    <td>{{item.id}}</td>
                    <td>{{item.sex}}</td>
                    <td>{{item.age}}</td>
                    <td>{{item.brand}}</td>
                    <td>{{item.model}}</td>
                    <td>{{item.code}}</td>
                    <td>{{item.size}}</td>
                    <td>{{item.color}}</td>
                    <td>{{item.stock}}</td>
                    <td>{{item.price}}</td>
                    <td>{{item.image}}</td>
                    <td>
                        <button style="background-color: yellow;">modificar</button>
                        <ng-container *ngIf="item.enabled then enabled else disabled"></ng-container>
                        <ng-template #enabled>
                            <button (click)="disableDress(item?.id)" style="background-color: red;">deshabilitar</button>
                        </ng-template>
                        <ng-template #disabled>
                            <button (click)="enableDress(item?.id)" style="background-color: green;">habilitar</button>
                        </ng-template>
                    </td>
                </tr>
                <!-- 
                    Luego hay que ver como colocar al final de cada fila un boton
                    para modificar y deshabilitar (q se muestre en Opciones de conf.),
                    pero eso se hace despues -->
            </tbody>
            
        </table>
    </ng-template>

    <ng-template #call_frag>
        <table class="center">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>VOLUMEN</th>
                    <th>AROMA</th>
                    <th>PAIS DE ORIGEN</th>
                    <th>SEXO</th>
                    <th>MARCA</th>
                    <th>MODELO</th>
                    <th>CODIGO</th>
                    <th>STOCK</th>
                    <th>PRECIO</th>
                    <th>URL IMAGEN</th>
                    <th>Opciones de configuración</th>
                </tr>
            </thead>
    
            <tbody>
                <tr *ngFor="let item of fragrances$ | async">
                    <td>{{item.id}}</td>
                    <td>{{item.volumen}}</td>
                    <td>{{item.aroma}}</td>
                    <td>{{item.originCountry}}</td>
                    <td>{{item.sex}}</td>
                    <td>{{item.brand}}</td>
                    <td>{{item.model}}</td>
                    <td>{{item.code}}</td>
                    <td>{{item.stock}}</td>
                    <td>{{item.price}}</td>
                    <td>{{item.image}}</td>
                    <td>
                        <button style="background-color: yellow;">modificar</button>
                        <button (click)="disableFragrance(item?.id)" style="background-color: red;">deshabilitar</button>
                    </td>
                </tr>
            </tbody>
            
        </table>
    </ng-template>

</ng-template>